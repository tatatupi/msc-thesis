%------------------------------------------------------------------------------
\chapter{Theoretical Background}
\vspace{-1cm} \label{cap2}

%\begin{flushright}
%\begin{minipage}{0.7\linewidth}
%\emph{``Quando uma criatura humana desperta para um grande sonho e
%sobre ele lança toda a força de sua alma, todo o universo conspira a
%seu favor.''}
%\end{minipage}
%\end{flushright}
%
%\begin{flushright}
%{Goethe}
%\end{flushright}

%\vspace{1cm}

%%Colocar uma descrição do capítulo aqui!
%\section{Introdução}\label{sec int_cap_2}


In this chapter, we review the irregular sampling problem and sensor fusion techniques. First, in Section \ref{irregular-sampling} we categorize the different types of irregularities that may occur in sampling and discuss the main causes and its particularities. A diagram is built by categorizing the main types studied in the scientific literature. Then, in Section \ref{sensor-fusion}, we start a brief explanation on the four techniques used for sensor fusion: possibilistic, fuzzy reasoning, evidential belief e probabilistic. The latter, being the one used in this work, is further explained and specific techniques to deal with irregular sampling in sensor fusion are addressed.


\section{Irregular Sampling Survey}\label{irregular-sampling}

Sampling irregularities may occur due to a variety of issues, sometimes as undesired side effects of using large sensor networks architectures and others due to deliberate non-uniform sampling schemes. In this section we try to categorize and review the main irregularities observed in practice. The diagram in  Fig. \ref{fig:diagrama2} provides a simplified overview of them, separated by their sources.

\tikzstyle{abstract}=[rectangle, draw=black, rounded corners, fill=blue!40, drop shadow,
text centered, anchor=north, text=white, text width=3cm]
\tikzstyle{comment}=[rectangle, draw=black, rounded corners, fill=green, drop shadow,
text centered, anchor=north, text=white, text width=3cm]
\tikzstyle{myarrow}=[->, >=open triangle 90, thick]
\tikzstyle{line}=[-, thick]

\begin{figure}
\begin{center}
	
	\begin{tikzpicture}[grow'=right,level distance=1.25in,sibling distance=.25in]
		\tikzset{edge from parent/.style= 
			{thick, draw, edge from parent fork right},
			every leaf node/.style=
			{draw,minimum width=1in,text width=1in,align=center,fill=blue!50},
			every tree node/.style=
			{draw,minimum width=1in,text width=1in,align=center,fill=orange!50}
			}
	
	\Tree 
	[.{Irregular Sampling} 
		[.{Sensor Networks}
			[.{Transmission Issues}
				{Time Delay} 
				{Packet Loss} 
				{Uncertain Observation} 
			]
			[.{Sensor Failure}
				{Packet Loss}
				{Uncertain Observation}
			]
			[.{Desynchro- nization} 
				{Aperiodic Sampling}
			]
			[.{Sensor Architecture} 
				{Time Delay} 
			]
		]
		[.{Measurement Procedures} 
			[.{Event-Based Sampling} 
				{Aperiodic Sampling}
			]
			[.{Deliberate NUS}
				{Aperiodic Sampling}
			]
			[.{Industrial Processes} 
				{Multi-Rate Sampling}
				{Time Delay}
				{Scarce Measurements}
			]
		]
		[.{Specific Systems}
			[.{High maneuverability}
				{Uncertain Observation}
			]
		]
	]

	\end{tikzpicture}
	
\end{center}
\caption{Irregular sampling diagram, showing the main causes (in orange) and effects (in blue) of irregularities}
\label{fig:diagrama2}
\end{figure}

Networked system monitoring and control appears to be the main cause of irregular sampling. Unreliable communication channels may lead to random time delays and loss of information, specially if the data are transmitted using a common media \citep{Sahebsara2007, Moayedi2011}. In case they get randomly interrupted during transmission or if a sensor fails at some point, the signal received may contain predominantly noise, causing uncertain observation or packet dropouts \citep{Hadidi1979, Wang2009}. Systems that are observed by a large number of desynchronized sensors will provide observations at random time intervals \citep{Micheli2002}. If they are synchronized but designed to operate in a centralized fashion, there is a chance that different time delays are produced due to distinct transmission routes for each sensor \citep{Bar-Shalom2000, Challa2003, Anxi2005}. \duvida{Talvez incluir informação de que, em alguns casos, é possível evitar essas irregularidades com investimentos na rede de comunicação}

However the communication networks shall not always be held responsible. Some applications are designed to be measured in an irregular way. In event-based schemes, for example, the measurements are transmitted only when certain conditions are met \citep{Liu2014,Zou2017}. Such approach can reduce communication resource consumption substantially \citep{Hu2017}, but will cause aperiodic sampling. Non-Uniform Sampling (NUS) is also intentionally used as an alias detection method \citep{Kunoh2015} or to enhance the spectral resolution of signals, largely used in Nuclear Magnetic Resonance (NMR) spectroscopy analysis \citep{Hyberts2013}. In other situations, due to the nature of the process being observed, the measurement strategy relies on different procedures. A lot of chemical processes, for instance, can be measured in a online, fast rate and delay free fashion, but provides inaccurate data. Therefore, lab analyses are used to improve estimation quality, but they are usually gathered at slower rates, sometimes irregularly and with possible time delays \citep{Fatehi2017}. Other industrial applications suffer from the same dilemma, and the sampling scheme ends up with a multi-rate data transmission, with random time delays and possibly measurement scarcity \citep{Penarrocha2012}. 

Finally, sampling irregularities might also appear due to a specific nature of a system. In some high maneuverable target-tracking applications, for example, there is a chance that the sensor misses the target, transmitting only noise, leading to the so called uncertain observation issue \citep{Wang2009, Chen2013}.

\duvida{Vale a pena introduzir o assunto de irregularidades do controlador para o atuador (e não só do sensor para o controlador)?}

On the next subsections, we review the main irregular sampling effects.


\subsection{Time Delay}

Time-delay System (TDS) is probably the most common mathematical representation to time delays in practice. The works of \citep{Richard2003, Fridman2014} and the references therein provide a good coverage of the subject. There might be delays in the input or output signals, introduced by the communication networks, or even state delays. The latter phenomenon is called system with aftereffect or dead-time. Since we are studying the irregular sampling issue, only the formers are relevant to us.

Considering delays in the measurement model only, \citep{Lu2005} studied the estimation problem when they are constant and known. They describe a linear measurement model as

\begin{equation}\label{eq:delay_model}
y_i(t)=H_i(t)x(t_i)+v_i(t)
\end{equation}

\noindent
where $i=0,\ 1,\ ...,\ l$ and $l$ is the number of different known delays. $y_i(t) \in \mathbb{R}^{p_i}$ are delayed measurements and $v_i(t) \in \mathbb{R}^{p_i}$ the measurement noises. The known delayed time instants are given by $t_i=t_{i-1}-d_i$, with $d_0=0$, $d_i>0$ for $i>0$ and $t_0=t$. \duvida{Acho que não seria necesssário dar mais detalhes da descrição, uma vez que já foi falado na formulação}

However, in many applications the measurements are received by the estimator with irregular and unknown delays. In such cases, time delays can be interpreted as a stochastic process $d(k)$, varying randomly throughout time. \citep{Han2009} describes a discrete-time measurement model for random delayed observations as

\begin{equation}\label{eq:delay_model2}
y(k) = H(k)x(k-d(k))+H(k)v(k)
\end{equation}

\noindent

where $d(k)$ is a random but bounded time delay, assumed to be a discrete-time Markov Chain observable at each sampling time k.

\begin{figure}
	\begin{center}
		
		\begin{tikzpicture}[grow'=down,level distance=1.25in,sibling distance=.25in]
		\tikzset{edge from parent/.style= 
			{thick, draw, edge from parent fork down},
			every leaf node/.style=
			{draw,minimum width=1in,text width=1in,align=center,fill=orange!50},
			every tree node/.style=
			{draw,minimum width=1in,text width=1in,align=center,fill=blue!50}
		}
		
		\Tree 
		[.{Time Delay} 
		{Transmission Issues} 
		{Sensor Architecture} 
		{Industrial Processes} 
		]
		
		\end{tikzpicture}
		
	\end{center}
	\caption{Irregular sampling diagram, showing the main causes (in orange) and effects (in blue) of irregularities}
	\label{fig:diagrama2}
\end{figure}


\todo[caption={Terminar seção de time-delay},inline]{Falta: incluir casos de OOSM e burst arrivals. A ideia seria continuar explicando como acontecem e uma breve descrição de acordo com uma referência}

\textit{Os atrasos podema ainda provocar OOSM \citep{Bar-Shalom2000, Challa2003,Anxi2005,Choi2009,Moayedi2011,Penarrocha2012,Westenberger2013}, de single-lag, multiple-lag ou mixed-lag. Na ocorrência de múltiplos atrasos, as informaçõs podem chegar em conjuntos, burst arrivals \citep{Moayedi2011}.}


\subsection{Packet Loss}

\todo[caption={Terminar seções de irregular sampling, da mesma forma que time-delay},inline]{A ideia seria continuar nos mesmos moldes que para o time delay, explicando as diferentes formas que cada irregularidade pode aparecer e como ela é tratada na literatura.}


A falta de dados pode ser por packet dropout \citep{}, quando a informação é perdida na transmissão. Os dropouts podem ser single ou multiple \citep{Sun2011,Zhu2013,ShuliSun2008,Sahebsara2007}, tendo o número de dropouts consecutivos ser limitado ou não.


\subsection{Uncertain Observation}

Para alguns sistemas, como de target tracking, medições feitas em intervalos discretos podem ser consideradas como existentes ou não (lack of target), com certa probabilidade. Pode ser que, para casos dados como existentes, na verdade não houve medição e a observação é composta apenas por ruído - uncertain observation \citep{Hadidi1979,Sun2011,Nahi1969}.

\subsection{Aperiodic Sampling}

A maioria dos efeitos mencionados consideram amostragem periódica, mas irregular. Há também os casos em que as amostragem são feitas de forma aperiódica (ou modeladas como tal). Sejam elas causadas por amostragem baseada em eventos ou para aproximar os intervalos de tempo aleatórios causadas por uma grande rede de sensores \citep{Micheli2002,Yan2017}. A falta de periodicidade também pode ser entendida como um intervalos de tempo com ruído \citep{Shen2016}.

Random jitter
Random Jitter, also called Gaussian jitter, is unpredictable electronic timing noise. Random jitter typically follows a normal distribution[citation needed] due to being caused by thermal noise in an electrical circuit or due to the central limit theorem. The central limit theorem states that composite effect of many uncorrelated noise sources, regardless of the distributions, approaches a normal distribution.

Sampling jitter
In analog to digital and digital to analog conversion of signals, the sampling is normally assumed to be periodic with a fixed period?the time between every two samples is the same. If there is jitter present on the clock signal to the analog-to-digital converter or a digital-to-analog converter, the time between samples varies and instantaneous signal error arises. The error is proportional to the slew rate of the desired signal and the absolute value of the clock error. Various effects such as noise (random jitter), or spectral components (periodic jitter)[specify] can come about depending on the pattern of the jitter in relation to the signal. In some conditions, less than a nanosecond of jitter can reduce the effective bit resolution of a converter with a Nyquist frequency of 22 kHz to 14 bits.
This is a consideration in high-frequency signal conversion, or where the clock signal is especially prone to interference.

\subsection{Multi-Rate Sampling}

Caso típico de processo industrial, com medições laboratoriais e sensores online. \citep{Fatehi2017}


\section{Sensor Fusion}\label{sensor-fusion}

Explicar brevemente sobre os tipos de fusão sensorial: possibilistic, fuzzy reasoning, evidential belief e probabilistic \citep{Khaleghi2013}. Focar no probabilistic. 

\subsection{Probabilistic Sensor Fusion}

Entrar em maiores detalhes do probabilistic, explicando KF e o PF (caso seja utilizado no trabalho).

\subsubsection{Kalman Filters}

\subsubsection{Particle Filters}

\subsection{Sensor Fusion Techniques}

Para fusão de informações múltiplas de observações, explicar os quatro grandes grupos: parallel filter (multi-output system, multi-output KF), sequential filter (kfusing first output as the prediction for the secod output), outputs fusion (outputs are fused using the noise covariance) e track-to-track fusion (single-output KFs fused considering correlation). \citep{Willner1976,Fatehi2017}

Tentar agrupar os principais métodos de filtragem, por tipo de irregularidade (possivelmente uma grande tabela)


\clearpage